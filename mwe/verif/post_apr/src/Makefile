

# folders (do NOT include end slash)
LOGS_FOLDER = logs
VCS_FOLDER = vcs

# Files necessary for simulation of module testbench
SRC_FILES = /home/lab.apps/vlsiapps/kits/tsmc/N65RF/1.0c/digital/Front_End/verilog/tcbn65gplus_140b/tcbn65gplus.v ./CPU_top.sv  ./datamem.sv  ./instructmem.sv ./P5SCPU.apr.v ./CPU_top_tb.sv


# files generated by vcs that we dont want cluttering things
VCS_FILES_TO_CLEAN = csrc simv simv.daidir ucli.key

# anything that may need to be updated/generated
TARGETS = $(LOGS_FOLDER) $(VCS_FOLDER) $(VCS_FOLDER)/CPU_top.vpd

all: $(TARGETS)


$(VCS_FOLDER)/CPU_top.vpd: $(SRC_FILES)
	vcs $(SRC_FILES) +v2k +vcs+vcdpluson +neg_tchk -R -sverilog -full64 -debug_pp -timescale=1ns/10ps -l $(subst $(VCS_FOLDER),$(LOGS_FOLDER), $@).log
	mv vcdplus.vpd $@
	rm -r $(VCS_FILES_TO_CLEAN)

$(LOGS_FOLDER):
	mkdir $@

$(VCS_FOLDER):
	mkdir $@


.PHONY: clean
clean:
	rm -r $(LOGS_FOLDER) $(VCS_FOLDER)
